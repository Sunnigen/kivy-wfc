#:import Palette ui.hover_palette
#:import MatchingTiles ui.popups
#:import TileProbability ui.popups
#:import TilesetChooser ui.popups
#:import MapSizePopup ui.popups


<MatchingTiles>:
    size_hint: 0.75, 0.75
    pos_hint: {'center_x': 0.5, 'center_y':0.5}

    title: 'Tile Matches'
    title_size: 30
    title_align: 'center'

<TileProbability>:
    size_hint: 0.5, 0.5
    pos_hint: {'center_x': 0.5, 'center_y':0.5}

    title: 'Modify Probabilities'
    title_size: 30
    title_align: 'center'

<TilesetChooser>:
    size_hint: 0.5, 0.5
    pos_hint: {'center_x': 0.5, 'center_y':0.5}

    title: 'Select Tileset Pickle'
    title_size: 30
    title_align: 'center'

<MapSizePopup>:
    size_hint: 0.5, 0.5
    pos_hint: {'center_x': 0.5, 'center_y':0.5}

    title: 'Modify Map Size'
    title_size: 30
    title_align: 'center'

<Content>:
    lbl_stats:_lbl_stats
    lbl_current:_lbl_current
    prob_palette:_prob_palette
    # tile_palette:_tile_palette
    generation_switch:_generation_switch

    size_hint: 1, 1
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    Button:
        pos_hint: {'x': 0.0, 'top': 0.95}
        size_hint: 0.1, 0.05
        text: '1 Tile'
        on_press: root.generate(1)

    # Button:
        # pos_hint: {'x': 0.0, 'top': 0.8}
        # size_hint: 0.1, 0.05
        # text: '5 Tiles'
        # on_press: root.generate(5)

    # Button:
        # pos_hint: {'x': 0.0, 'top': 0.85}
        # size_hint: 0.1, 0.05
        # text: '10 Tiles'
        # on_press: root.generate(10)

    # Button:
        # pos_hint: {'x': 0.0, 'top': 0.9}
        # size_hint: 0.1, 0.05
        # text: '20 Tiles'
        # on_press: root.generate(20)

    # Button:
        # pos_hint: {'x': 0.0, 'top': 0.95}
        # size_hint: 0.1, 0.05
        # text: '50 Tiles'
        # on_press: root.generate(50)

    Switch:
        id: _generation_switch
        active: False
        size_hint: 0.1, 0.05
        pos_hint: {'x': 0.0, 'top': 1.0}
        on_active: root.continuous_generation(self, self.active)

    Label:
        text: "(Spacebar)"
        pos_hint: {'x': 0.1, 'top': 1.0}
        size_hint: 0.1, 0.05
        text_size: self.size
        halign: "left"
        valign: "middle"

    Button:
        pos_hint: {'right': 0.7, 'top': 1.0}
        size_hint: 0.1, 0.1
        text: 'Map Size'
        on_press: root.map_size_popup()

    # Button:
        # pos_hint: {'right': 0.9, 'top': 0.9}
        # size_hint: 0.1, 0.1
        # text: 'Random'
        # on_press: root.random_tiles()

    # Button:
        # pos_hint: {'right': 1.0, 'top': 0.9}
        # size_hint: 0.1, 0.1
        # text: 'Save Prob'
        # on_press: root.probability_change()

    # Button:
    #     pos_hint: {'right': 0.6, 'top': 1}
    #     size_hint: 0.1, 0.1
    #     text: 'Matches'
    #     on_press: root.display_matching_tiles()

    Button:
        pos_hint: {'right': 0.50, 'top': 1.0}
        size_hint: 0.15, 0.1
        text: 'Toggle Border'
        on_press: root.toggle_border()

    Button:
        pos_hint: {'right': 0.8, 'top': 1}
        size_hint: 0.1, 0.1
        text: 'Load Tileset'
        on_press: root.tileset_popup()

    Button:
        pos_hint: {'right': 0.9, 'top': 1}
        size_hint: 0.1, 0.1
        text: 'Reset Map'
        on_press: root.reset_map_texture()

    Button:
        pos_hint: {'right': 1, 'top': 1}
        size_hint: 0.1, 0.1
        text: 'Print Stats'
        on_press: root.print_stats()

    # Button:
        # pos_hint: {'right': 1, 'top': 0.8}
        # size_hint: 0.1, 0.1
        # text: 'Force'
        # on_press: root.force_tile()

    Palette:
        id: _prob_palette
        palette_type: 'probability'
        size_hint: (.20, 0.70)
        pos_hint: {'x':.995, 'top':.70}

    # Palette:
        # id: _tile_palette
        # palette_type: 'tile'
        # size_hint: (0.25, 1)
        # pos_hint: {'right':.005, 'top':1}

    Label:
        id: _lbl_stats
        pos_hint: {'x':.25, 'y':0}
        size_hint: 1, 0.05
        text: 'N/A'
        text_size: self.size
        markup: True
        valign: 'middle'
        halign: 'left'

    Label:
        id: _lbl_current
        pos_hint: {'x':0, 'top':0}
        # pos_hint: {'x':.25, 'y':.1}
        size_hint: 1, 0.15
        text: 'N/A'
        text_size: self.size
        markup: True
        valign: 'middle'
        halign: 'left'
